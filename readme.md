# О проекте
Minecraft Discord Bot -- discord бот для управления сервером Minecraft. Функции бота:
* Включение/выключение сервера.
* Получение статуса сервера (включен/выключен).
* Пропуск ночи.
* Получение количества игроков онлайн на сервере.
* Дублирование логов сервера в указанный канал Discord.

Управление ботом происходит как с помощью слеш команд, так и с помощью заданного префикса.

Проект разрабатывается исключительно для собственных нужд. Обновляется по мере желания и необходимости.
*Автор хостит свой небольшой сервер Minecraft на локальной машине, на котором играет с друзьями.
Бот избавил от необходимости быть всегда на связи, если кому-то захочется поиграть на сервере, а он
выключен. Остальные функции вторичны.*

*Сервер Minecraft должен быть установлен на той же машине, что и бот.*

# Установка
Проект проверен в работе с Python 3.11.5 + Windows 11.
1. Клонируем репозиторий
```
git clone https://github.com/Emperator122/MinecraftDiscordBot.git
```
2. Устанавливаем зависимости
```
pip install -r requirements.txt
```
3. В директории сервера Minecraft (*в целом где угодно на ПК*) должен быть создан ``.bat`` файл для запуска сервера. Пример
моего файла (1.20.1+fabric)
```
"C:\sdks\jdk-17.0.8\bin\java.exe" -Xmx8G -Xms6G -jar fabric-server-launch.jar
```
4. Переходим в папку проекта ``config``. Создаем на основании примера файл ``.env``, который должен содержать
следующие переменные
```dotenv
TOKEN=<Токен Discord бота>
PREFIX=<Префикс обычных команд (стандартный ~/)>
MC_LOG_CHANNEL_ID=<ID канала, в который будут отправляться логи сервера (можно оставить пустым).>
LAUNCH_FILE_PATH=<Путь к .bat файлу запуска сервера. Например E:\mserver_1.20.1_fabric\start.bat>
```
5. Запускаем бота (например через комлпектный ``start_bot.bat``).

Под Windows при желании бот можно запускать как службу, если использовать для запуска ``.bat`` (свой
или комплектный). Для этих целей удобно использовать ``NSSM``. *При запуске бота как службы, не появляется
окно java-консоли управления сервером. Решения этой проблемы не нашел*.

# Список команд
| Команда                  | Описание                                                                     |
|--------------------------|------------------------------------------------------------------------------|
| ``server start``         | Запуск сервера                                                               |
| ``server stop``          | Остановка сервера. Производится "мягко", с сохранением данных перед выходом. |
| ``server status``        | Статус сервера: включен/выключен.                                            |
| ``server sleep``         | Делает день на сервере.                                                      |
| ``server players_count`` | Выводит количество игроков на сервере.                                       |
| ``sleep``                | Более короткая команды server sleep.                                         |
| ``help``                 | Подсказка с командами.                                                       |

*Все команды доступны как в режиме слеш-команд, так и через заданный разделитель.*